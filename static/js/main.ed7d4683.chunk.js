(this["webpackJsonpgithub-pages"]=this["webpackJsonpgithub-pages"]||[]).push([[12],{17:function(t,e,a){"use strict";a.r(e),a.d(e,"completion",(function(){return n}));var s=a(7),i=function(t,e){return t+e};function n(t){var e=[],a=0;if(t.items.forEach((function(t){a+=t.rate})),t.items.forEach((function(s){e.push(s.rate/a*(t.chance/100))})),e.push(1-e.reduce(i)),e.length>20)return[];var n=e.reduce((function(t,e){return t.concat(t.map((function(t){return[e].concat(Object(s.a)(t))})))}),[[]]);n.sort((function(t,e){return t.length>=e.length?1:-1}));for(var r=function(t){for(var e=[];e.length<=t;){e.unshift(1);for(var a=1;a<e.length-1;a++)e[a]+=e[a+1]}return e}(e.length),o=0,c=0;c<e.length;c++)for(var h=Math.pow(-1,e.length-1-c),l=0;l<r[c];l++){if(0!==c)o+=h*(1/(1-n[r.slice(r.length-c).reduce(i)+l].reduce(i)));else o+=1*h}return"zulrah"===t.name?Math.round(o/2):Math.round(o)}},22:function(t,e,a){var s={"./arma":[24,0],"./arma.js":[24,0],"./bandos":[25,1],"./bandos.js":[25,1],"./cg":[26,2],"./cg.js":[26,2],"./completion":[17],"./completion-old":[27,3],"./completion-old.js":[27,3],"./completion.js":[17],"./corp":[28,4],"./corp.js":[28,4],"./cox":[29,5],"./cox.js":[29,5],"./looter":[8],"./looter.js":[8],"./pnm":[30,6],"./pnm.js":[30,6],"./sara":[31,7],"./sara.js":[31,7],"./tob":[32,8],"./tob.js":[32,8],"./vorkath":[33,9],"./vorkath.js":[33,9],"./zammy":[34,10],"./zammy.js":[34,10],"./zulrah":[35,11],"./zulrah.js":[35,11]};function i(t){if(!a.o(s,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=s[t],i=e[0];return Promise.all(e.slice(1).map(a.e)).then((function(){return a(i)}))}i.keys=function(){return Object.keys(s)},i.id=22,t.exports=i},40:function(t,e,a){},41:function(t,e,a){},44:function(t,e,a){},46:function(t,e,a){},47:function(t,e,a){"use strict";a.r(e);var s=a(1),i=a.n(s),n=a(23),r=a.n(n),o=(a(40),a(9)),c=a(10),h=a(13),l=a(12),u=(a(41),a(15)),p=a(0),d=function(t){Object(h.a)(a,t);var e=Object(l.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)("div",{children:Object(p.jsx)("nav",{children:Object(p.jsxs)("ul",{id:"navigation",children:[Object(p.jsx)("li",{children:Object(p.jsx)(u.b,{to:"/",children:"Home"})}),Object(p.jsx)("li",{children:Object(p.jsx)(u.b,{to:"/osrs",children:"osrs"})}),Object(p.jsx)("li",{children:Object(p.jsx)(u.b,{to:"/mage-run",children:"Mage run"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{href:"https://github.com/PattyRich/github-pages",children:" repo this comes from "})})]})})})})}}]),a}(i.a.Component),m=d,f=a(7),b=a(19),x=a(18),j=a(3),v=a.n(j),g=a(6),y=a(4),O=(a(44),a(8)),k=a(21),w=a.n(k),C=function(t){Object(h.a)(s,t);var e=Object(l.a)(s);function s(){var t;if(Object(o.a)(this,s),(t=e.call(this)).state={mode:"cox",rewards:null,rolls:"",nothingCounter:0,rewardList:[],rewardCount:0,rewardCountConst:0,points:3e4,pets:!0,histogramData:[],simulations:1e3,icons:{},bosses:[],createData:{bossName:"Name me",numItems:1,items:[{name:"Saradomin godsword",rate:"1/100"}],pet:{name:"Baby mole",rate:"1/5000"}}},void 0!==localStorage.getItem("bosses")&&null!==localStorage.getItem("bosses")&&localStorage.getItem("bosses").length)try{t.state.bosses=JSON.parse(localStorage.getItem("bosses"))}catch(a){console.log(a,"error parsing bosses from cache")}return t.onChangeValue=t.onChangeValue.bind(Object(y.a)(t)),t.onChangeValueInput=t.onChangeValueInput.bind(Object(y.a)(t)),t.go=t.go.bind(Object(y.a)(t)),t.stopInterval=t.stopInterval.bind(Object(y.a)(t)),t.graphSimulation=t.graphSimulation.bind(Object(y.a)(t)),t.lootFunction=t.lootFunction.bind(Object(y.a)(t)),t.saveBoss=t.saveBoss.bind(Object(y.a)(t)),t.selectBoss=t.selectBoss.bind(Object(y.a)(t)),t.deleteBoss=t.deleteBoss.bind(Object(y.a)(t)),t.completion=t.completion.bind(Object(y.a)(t)),t.interval=null,t}return Object(c.a)(s,[{key:"onChangeValue",value:function(){var t=Object(g.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({mode:e.target.value}),this.completion(e.target.value),this.addIcons(e.target.value);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"saveBoss",value:function(){var t=this;if(!(this.state.bosses.findIndex((function(e){return e.bossName===t.state.createData.bossName}))>-1)){var e=this.state.bosses;e.push(this.state.createData),this.setState({bosses:e}),localStorage.setItem("bosses",JSON.stringify(e))}}},{key:"selectBoss",value:function(t){var e=this.state.bosses.findIndex((function(e){return e.bossName===t}));this.setState({createData:this.state.bosses[e]})}},{key:"deleteBoss",value:function(){var t=this,e=this.state.bosses.findIndex((function(e){return e.bossName===t.state.createData.bossName}));if(!(e<0)){var a=this.state.bosses;a.splice(e,1),this.setState({bosses:a}),localStorage.setItem("bosses",JSON.stringify(a))}}},{key:"onChangeValueInput",value:function(t,e){this.setState(Object(x.a)({},t,e.target.value))}},{key:"changeCreateData",value:function(t,e,a){var s=Object(b.a)({},this.state.createData);function i(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}function n(t){return t.replace(/[^0-9/.]/g,"")}"num"===t?(s.numItems=e,s.items.length>=s.numItems?s.items.pop():s.items.push({name:"",rate:"1/100"}),this.setState({createData:s})):"name"===t?s.items[a].name=i(e):"rate"===t?s.items[a].rate=n(e):"petRate"===t?s.pet.rate=n(e):"petName"===t?s.pet.name=i(e):"bossName"===t&&(s.bossName=e),this.setState({createData:s})}},{key:"addIcons",value:function(){var t=Object(g.a)(v.a.mark((function t(e){var s,i,n,r,o,c=this;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=function(t){return new Promise(function(){var e=Object(g.a)(v.a.mark((function e(a,i){var n,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s[t]){e.next=18;break}return e.prev=1,s[t]="loading",e.next=5,fetch('https://api.osrsbox.com/items?where={ "name": "'.concat(t,'", "duplicate": false }'));case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,o=r._items[0].icon,s[t]=o,a(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0),a();case 18:a();case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a){return e.apply(this,arguments)}}())},s=Object(b.a)({},this.state.icons),"create"!==e){t.next=11;break}for(i=Object(b.a)({},this.state.createData),n=[],r=0;r<i.items.length;r++)n.push(o(i.items[r].name));return i.pet&&n.push(o(i.pet.name)),t.next=9,Promise.all(n);case 9:return this.setState({icons:s}),t.abrupt("return");case 11:a(22)("./"+e).then(function(){var t=Object(g.a)(v.a.mark((function t(e){var a,i,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=JSON.parse(JSON.stringify(e)).data,i=[],n=0;n<a.items.length;n++)i.push(o(a.items[n].name));return i.push(o(a.pet.name)),t.next=6,Promise.all(i);case 6:c.setState({icons:s});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"simulate",value:function(){var t=this;this.interval&&clearInterval(this.interval);var e=Number(this.state.rolls);e>100&&(e=100),this.setState({rewardList:[],rewardCount:0,rewardCountConst:e}),this.interval=setInterval(Object(g.a)(v.a.mark((function a(){var s;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=null,!t.state.rewardCountConst){a.next=6;break}return a.next=4,t.lootFunction(e,t.state.mode,{points:t.state.points,pets:t.state.pets,createData:t.state.createData});case 4:s=a.sent,t.setState({rewardList:[s].concat(Object(f.a)(t.state.rewardList)),rewardCount:t.state.rewardCount+t.state.rewardCountConst});case 6:case"end":return a.stop()}}),a)}))),2e3)}},{key:"go",value:function(){var t=Object(g.a)(v.a.mark((function t(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.next=3,this.lootFunction(this.state.rolls,this.state.mode,{points:this.state.points,pets:this.state.pets,createData:this.state.createData});case 3:e=t.sent,this.setState({rewards:e}),e&&0===e.length?this.setState({nothingCounter:this.state.nothingCounter+1}):this.setState({nothingCounter:0});case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"graphSimulation",value:function(){var t=Object(g.a)(v.a.mark((function t(){var e,a,s,i,n,r,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],a=[],s=0;case 3:if(!(s<this.state.simulations)){t.next=12;break}return t.next=6,this.lootFunction("f",this.state.mode,{points:this.state.points,pets:this.state.pets,createData:this.state.createData});case 6:i=t.sent,e.push(i[i.length-1].kc),a.push(i.length);case 9:s++,t.next=3;break;case 12:n=[{x:e,type:"histogram"}],r=[{x:e,y:a,mode:"markers",type:"scatter"}],o={xaxis:{title:{text:"KC"}},yaxis:{title:{text:"# of people"}}},w.a.newPlot("histogram",n,o),o.yaxis.title.text="# of items received",w.a.newPlot("scatter",r,o);case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=Object(g.a)(v.a.mark((function t(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.lootFunction(null,this.state.mode,{points:this.state.points,runCompletion:!0,pets:this.state.pets,createData:this.state.createData});case 2:e=t.sent,this.setState({completion:e}),this.addIcons(this.state.mode);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"lootFunction",value:function(t,e,a){var s=Number(t);return"create"===this.state.mode&&(this.addIcons(this.state.mode),this.completion()),s&&t?Object(O.loot)(s,e,a):0===s?Object(O.loot)("f",e,a):Object(O.loot)(t,e,a)}},{key:"completion",value:function(){var t=Object(g.a)(v.a.mark((function t(e){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.loot)(null,e||this.state.mode,{points:this.state.points,runCompletion:!0,pets:this.state.pets,createData:this.state.createData});case 2:a=t.sent,this.setState({completion:a});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"stopInterval",value:function(){this.interval&&clearInterval(this.interval)}},{key:"componentWillUnmount",value:function(){this.stopInterval()}},{key:"render",value:function(){var t=this;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"box",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"radio",value:"cox",name:"",checked:"cox"===this.state.mode,onChange:this.onChangeValue})," Cox",Object(p.jsx)("input",{type:"radio",value:"tob",name:"",checked:"tob"===this.state.mode,onChange:this.onChangeValue})," Tob",Object(p.jsx)("input",{type:"radio",value:"cg",name:"",checked:"cg"===this.state.mode,onChange:this.onChangeValue})," Corrupted Gauntlet",Object(p.jsx)("input",{type:"radio",value:"corp",name:"",checked:"corp"===this.state.mode,onChange:this.onChangeValue})," Corp",Object(p.jsx)("input",{type:"radio",value:"pnm",name:"",checked:"pnm"===this.state.mode,onChange:this.onChangeValue})," Phosani's Nightmare",Object(p.jsx)("input",{type:"radio",value:"zulrah",name:"",checked:"zulrah"===this.state.mode,onChange:this.onChangeValue})," Zulrah",Object(p.jsx)("input",{type:"radio",value:"vorkath",name:"",checked:"vorkath"===this.state.mode,onChange:this.onChangeValue})," Vorkath",Object(p.jsx)("input",{type:"radio",value:"arma",name:"",checked:"arma"===this.state.mode,onChange:this.onChangeValue})," Arma",Object(p.jsx)("input",{type:"radio",value:"bandos",name:"",checked:"bandos"===this.state.mode,onChange:this.onChangeValue})," Bandos",Object(p.jsx)("input",{type:"radio",value:"sara",name:"",checked:"sara"===this.state.mode,onChange:this.onChangeValue})," Sara",Object(p.jsx)("input",{type:"radio",value:"zammy",name:"",checked:"zammy"===this.state.mode,onChange:this.onChangeValue})," Zammy",Object(p.jsx)("input",{type:"radio",value:"create",name:"",checked:"create"===this.state.mode,onChange:this.onChangeValue})," Create Your Own Boss"]}),"create"===this.state.mode?Object(p.jsxs)("div",{style:{margin:"30px"},children:[Object(p.jsxs)("div",{style:{padding:"10px",margin:"10px 0px",border:"solid black 2px"},children:["Use fractions for rate or you will crash the webpage :)",Object(p.jsx)("br",{}),"Item names must be spelled exactly how they are on the wiki",Object(p.jsx)("br",{}),Object(p.jsx)("button",{style:{margin:"3px"},onClick:this.saveBoss,children:" Save boss "}),Object(p.jsx)("button",{style:{margin:"3px"},onClick:this.deleteBoss,children:" Delete boss "}),"\xa0 Boss name: ",Object(p.jsx)("input",{type:"text",value:this.state.createData.bossName,onChange:function(e){return t.changeCreateData("bossName",e.target.value)}}),"\xa0 Load previous boss.",Object(p.jsxs)("select",{value:"",onChange:function(e){return t.selectBoss(e.target.value)},children:[Object(p.jsx)("option",{value:""}),this.state.bosses.map((function(t,e){return Object(p.jsx)("option",{value:t.bossName,children:t.bossName})}))]})]}),"Number of unique items you must obtain. \xa0",Object(p.jsx)("button",{onClick:function(){return t.changeCreateData("num",t.state.createData.numItems-1)},children:" - "}),Object(p.jsxs)("span",{children:[" ",this.state.createData.numItems," "]}),Object(p.jsx)("button",{onClick:function(){return t.changeCreateData("num",t.state.createData.numItems+1)},children:" + "}),this.state.createData.items.map((function(e,a){return Object(p.jsxs)("div",{children:["Item ",a+1,": Name: ",Object(p.jsx)("input",{type:"text",value:t.state.createData.items[a].name,onChange:function(e){return t.changeCreateData("name",e.target.value,a)}}),"\xa0 Rate: ",Object(p.jsx)("input",{type:"text",value:t.state.createData.items[a].rate,onChange:function(e){return t.changeCreateData("rate",e.target.value,a)}})]})})),this.state.pets?Object(p.jsxs)("div",{children:["Pet: Name: ",Object(p.jsx)("input",{type:"text",value:this.state.createData.pet.name,onChange:function(e){return t.changeCreateData("petName",e.target.value)}}),"\xa0 Rate: ",Object(p.jsx)("input",{type:"text",value:this.state.createData.pet.rate,onChange:function(e){return t.changeCreateData("petRate",e.target.value)}})]}):null]}):null,Object(p.jsx)("label",{children:"Number of rolls (f or nothing for completion) "}),Object(p.jsx)("input",{type:"text",value:this.state.rolls,onChange:function(e){return t.onChangeValueInput("rolls",e)}}),Object(p.jsx)("br",{}),"Include pet for completion? ",Object(p.jsx)("input",{type:"checkbox",onChange:function(){return t.setState({pets:!t.state.pets})},checked:this.state.pets}),Object(p.jsx)("br",{}),"cox"===this.state.mode?Object(p.jsxs)("span",{children:[Object(p.jsx)("label",{children:"Number of cox points per raid "}),Object(p.jsx)("input",{type:"text",value:this.state.points,onChange:function(e){return t.onChangeValueInput("points",e)}})]}):null,Object(p.jsx)("br",{}),Object(p.jsx)("button",{onClick:this.go,children:" Go! "}),"\xa0 or",Object(p.jsx)("button",{style:{margin:"10px"},onClick:function(){return t.simulate()},children:" Simulate daily raids. (must be rolls <= 100) "}),this.state.rewardList.length?Object(p.jsx)("button",{style:{background:"#c90c1c"},onClick:this.stopInterval,children:" Stop "}):null,this.state.completion?Object(p.jsxs)("span",{children:[" Average completion without pet is: ",this.state.completion," kc "]}):null,"create"===this.state.mode?Object(p.jsx)("span",{children:" (This will be wrong if your rates are very common) "}):null,Object(p.jsx)("br",{}),Object(p.jsxs)("span",{children:[Object(p.jsx)("label",{children:" Plot results a # of simulations  "}),Object(p.jsx)("input",{type:"text",value:this.state.simulations,onChange:function(e){return t.onChangeValueInput("simulations",e)}})]}),Object(p.jsx)("button",{onClick:this.graphSimulation,children:" Plot. "}),Object(p.jsxs)("div",{className:"items",children:[this.state.rewards?this.state.rewards.map((function(e){return Object(p.jsxs)("div",{className:"item",children:[Object(p.jsx)("a",{href:"https://oldschool.runescape.wiki/w/".concat(e.name.split(" ").join("_")),target:"_blank",rel:"noreferrer",children:Object(p.jsx)("img",{src:"data:image/png;base64,"+t.state.icons[e.name],title:e.name,alt:e.name})}),e.kc]})})):null,this.state.rewards&&0===this.state.rewards.length?"Nothing x"+this.state.nothingCounter:null]})]}),this.state.rewardList.length?Object(p.jsxs)("div",{className:"box",children:["Overall KC: ",this.state.rewardCount,Object(p.jsx)("div",{className:"day",children:this.state.rewardList.length?this.state.rewardList.map((function(e,a){var s=new Date;return s.setDate(s.getDate()+t.state.rewardList.length-(a+1)),s=s.toLocaleString().split(",")[0],Object(p.jsxs)("div",{className:"flexCol",children:[s,Object(p.jsx)("div",{className:"items",children:e.length?e.map((function(e){return Object(p.jsxs)("div",{className:"item",children:[Object(p.jsx)("a",{href:"https://oldschool.runescape.wiki/w/".concat(e.name.split(" ").join("_")),target:"_blank",rel:"noreferrer",children:Object(p.jsx)("img",{src:"data:image/png;base64,"+t.state.icons[e.name],title:e.name,alt:e.name})}),e.kc," (",t.state.rewardCountConst*(t.state.rewardList.length-a)-(t.state.rewardCountConst-e.kc),")"]})})):null}),Object(p.jsx)("hr",{})]})})):null})]}):null,Object(p.jsx)("div",{id:"histogram",children:" "}),Object(p.jsx)("div",{id:"scatter",children:" "})]})}}]),s}(i.a.Component),S=C,D=(a(46),function(t){Object(h.a)(a,t);var e=Object(l.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).state={widthAmt:17,heightAmt:6,headDirection:"olm-center",xpDrops:[]},t.resize=t.resize.bind(Object(y.a)(t)),t.canvas=i.a.createRef(),t.canvas2=i.a.createRef(),t.ctx=null,t.player={x:0,y:0},t.interval=null,t.destination={x:0,y:0},t.destinationOnTick={x:0,y:0},t.offset=300,t.olm={tta:4},t.oneTickBlock=!1,t.playerAttackcd=0,t.playerAttack=null,t.playerAttackQueued=!1,t.olmAttack=null,t.resize=t.resize.bind(Object(y.a)(t)),t.drawTiles=t.drawTiles.bind(Object(y.a)(t)),t.getTile=t.getTile.bind(Object(y.a)(t)),t.attackWillHit=!1,t}return Object(c.a)(a,[{key:"resize",value:function(){var t,e,a=window.innerHeight,s=window.innerWidth;s/a>2.83333333333?e=2.83333333333*(t=a):t=(e=s)/2.83333333333,t<300&&(e=2.83333333333*(t=300)),t+this.offset>a&&(e=2.83333333333*(t=a-this.offset)),this.tileSize=t/this.state.heightAmt,t+=this.offset,this.canvas.current.height=t,this.canvas.current.width=e,this.canvas2.current.height=t,this.canvas2.current.width=e,this.drawBoard()}},{key:"drawBoard",value:function(){this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.drawTiles(),this.drawChar(),this.drawDesination(),this.drawClaw(),this.drawStar&&(this.drawStar=!1,this.attackWillHit?N(170,200,20,30,25,this.ctx,"red"):N(170,200,20,30,25,this.ctx,"blue"))}},{key:"drawClaw",value:function(){this.ctx.fillStyle="#00FFEE",this.ctx.fillRect(25,75,300,200),this.ctx.fillStyle="#000000",this.ctx.font="40px serif",this.ctx.fillText("Mage hand",85,150)}},{key:"drawChar",value:function(){this.ctx.strokeStyle="#00FFEE",this.ctx.strokeRect(this.player.x*this.tileSize,this.offset+this.player.y*this.tileSize,this.tileSize,this.tileSize)}},{key:"drawDesination",value:function(){this.destinationOnTick?this.player.x===this.destinationOnTick.x&&this.player.y===this.destinationOnTick.y||(this.ctx.strokeStyle="#FFFF00",this.ctx.strokeRect(this.destinationOnTick.x*this.tileSize,this.offset+this.destinationOnTick.y*this.tileSize,this.tileSize,this.tileSize)):this.destination&&(this.player.x===this.destination.x&&this.player.y===this.destination.y||(this.ctx.strokeStyle="#FFFF00",this.ctx.strokeRect(this.destination.x*this.tileSize,this.offset+this.destination.y*this.tileSize,this.tileSize,this.tileSize)))}},{key:"drawTiles",value:function(){this.ctx.strokeStyle="grey";for(var t=0;t<this.state.heightAmt;t++)for(var e=0;e<this.state.widthAmt;e++)this.ctx.strokeRect(e*this.tileSize,this.offset+t*this.tileSize,this.tileSize,this.tileSize);this.ctx.strokeStyle="red";for(var a=0;a<=1;a++)this.ctx.strokeRect(1*this.tileSize,this.offset+a*this.tileSize,this.tileSize,this.tileSize),this.ctx.strokeRect(6*this.tileSize,this.offset+a*this.tileSize,this.tileSize,this.tileSize),this.ctx.strokeRect(10*this.tileSize,this.offset+a*this.tileSize,this.tileSize,this.tileSize),this.ctx.strokeRect(13*this.tileSize,this.offset+a*this.tileSize,this.tileSize,this.tileSize)}},{key:"getTile",value:function(t){var e=t.offsetX,a=t.offsetY-this.offset,s=Math.floor(e/this.tileSize),i=Math.floor(a/this.tileSize);return t.offsetX>25&&t.offsetX<325&&t.offsetY>75&&t.offsetY<275?(this.attackLoop=!0,this.player.x>=13?this.player.x%2==0?{x:12,y:this.player.y}:{x:11,y:this.player.y}:{x:this.player.x,y:this.player.y}):(this.attackLoop=!1,i<0&&(i=0),s>16&&(s=16),i>this.state.heightAmt&&(i=this.state.heightAmt-1),{x:s,y:i})}},{key:"updateDestinationAfterTimeout",value:function(){this.destinationOnTick&&(this.destination=JSON.parse(JSON.stringify(this.destinationOnTick)),this.destinationOnTick=null)}},{key:"moveChar",value:function(){if(this.destination){var t=this.destination.x-this.player.x,e=this.destination.y-this.player.y,a=Math.abs(t),s=Math.abs(e),i=a-s;if(i>=2)if(a>s){var n=this.player.x+(this.destination.x-this.player.x>0?2:-2);this.player={x:n,y:this.player.y}}else{var r=this.player.y+(this.destination.y-this.player.y>0?2:-2);this.player={x:this.player.x,y:r}}else{var o=t;t>2&&(o=2),t<-2&&(o=-2);var c=e;e>2&&(c=2),e<-2&&(c=-2),1===i&&s>=2&&a>=2&&(c>0&&(c-=1),c<0&&(c+=1)),-1===i&&s>=2&&a>=2&&(o>0&&(o-=1),o<0&&(o+=1)),this.player={x:this.player.x+o,y:this.player.y+c},0==t&&0==e&&(this.destination=null)}}}},{key:"olmAction",value:function(){this.olm.tta=this.olm.tta-1,0==this.olm.tta&&(this.olm.tta=4,"olm-left"==this.state.headDirection?this.player.x<=1?this.olmAttack={x:this.canvas.current.width/2,y:this.offset-150}:this.player.x>1&&this.player.x<=8?1==Math.floor(2*Math.random())?this.setState({headDirection:"olm-center"}):this.olmAttack={x:this.canvas.current.width/2,y:this.offset-150}:this.player.x>=9&&this.player.x<=12?this.setState({headDirection:"olm-center"}):this.setState({headDirection:"olm-right"}):"olm-center"==this.state.headDirection?this.player.x>1&&this.player.x<=12?this.olmAttack={x:this.canvas.current.width/2,y:this.offset-150}:this.player.x<=1?this.setState({headDirection:"olm-left"}):this.setState({headDirection:"olm-right"}):this.player.x>=13?this.olmAttack={x:this.canvas.current.width/2,y:this.offset-150}:this.player.x>1&&this.player.x<=12?this.player.x<=6?this.attackWillHit?this.setState({headDirection:"olm-left"}):this.setState({headDirection:"olm-center"}):1==Math.floor(2*Math.random())?this.setState({headDirection:"olm-center"}):this.olmAttack={x:this.canvas.current.width/2,y:this.offset-150}:this.setState({headDirection:"olm-left"}),this.attackWillHit=!1)}},{key:"playerAttackFunc",value:function(){if(this.attackLoop&&this.player.x<=12&&this.playerAttackcd<=0){var t=new Audio("".concat("/github-pages","/assets/trident.mp3"));t.addEventListener("loadeddata",(function(){t.play()}));var e=this.playerCords();4==Math.floor(5*Math.random())?this.attackWillHit=!1:(this.attackWillHit=!0,this.procXp()),this.playerAttack={x:e.x,y:e.y},this.playerAttackcd=4}}},{key:"procXp",value:function(){var t=this,e=Object(f.a)(this.state.xpDrops);e.push("sdafijadsfjsal"),this.setState({xpDrops:e}),setTimeout((function(){var e=Object(f.a)(t.state.xpDrops);e.shift(),t.setState({xpDrops:e})}),4e3)}},{key:"gameTick",value:function(){this.playerAttackcd-=1,this.olmAction(),this.moveChar(),this.playerAttackFunc(),this.drawBoard()}},{key:"animate",value:function(){var t=this;this.ctx2.clearRect(0,0,this.canvas2.current.width,this.canvas2.current.height),requestAnimationFrame((function(){return t.animate()}));try{this.olmAttack&&(this.ctx2.beginPath(),this.olmAttack=z(this.olmAttack,this.playerCords()),this.ctx2.arc(this.olmAttack.x,this.olmAttack.y,10,0,2*Math.PI,!1),this.ctx2.fillStyle="green",this.ctx2.fill())}catch(e){}try{this.ctx2.beginPath(),this.playerAttack=z(this.playerAttack,{x:175,y:200}),null==this.playerAttack&&(this.drawStar=!0,this.attackWillHit?N(170,200,20,30,25,this.ctx,"red"):N(170,200,20,30,25,this.ctx,"blue")),this.ctx2.arc(this.playerAttack.x,this.playerAttack.y,10,0,2*Math.PI,!1),this.ctx2.fillStyle="blue",this.ctx2.fill()}catch(e){}}},{key:"playerCords",value:function(){return{x:this.player.x*this.tileSize+this.tileSize/2,y:this.offset+this.player.y*this.tileSize+this.tileSize/2}}},{key:"componentDidMount",value:function(){var t=this,e=this.canvas.current.getContext("2d");this.ctx=e;var a=this.canvas2.current.getContext("2d");this.ctx2=a,this.resize(),this.drawBoard(),window.addEventListener("resize",this.resize),window.addEventListener("mousedown",(function(e){t.destinationOnTick=t.getTile(e),t.drawBoard(),setTimeout((function(){t.updateDestinationAfterTimeout()}),75)})),this.interval=setInterval((function(){t.gameTick()}),600),this.animate()}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){return Object(p.jsxs)("div",{id:"background",children:[Object(p.jsxs)("div",{className:"parent",children:[Object(p.jsx)("img",{className:"olm ".concat(this.state.headDirection," child"),src:"".concat("/github-pages","/assets/olm.png"),height:this.offset-20}),this.state.xpDrops.map((function(){return Object(p.jsxs)("div",{style:{color:"white"},className:"fade-out child2",children:[Object(p.jsx)("img",{className:"",src:"".concat("/github-pages","/assets/magic-icon.png"),height:20}),"123"]})}))]}),Object(p.jsx)("canvas",{id:"olm-room",ref:this.canvas}),Object(p.jsx)("canvas",{id:"projectiles",ref:this.canvas2})]})}}]),a}(i.a.Component));function z(t,e){var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);if(t.x<0)return t;if(a<30&&s<30)return null;var i=a/s,n=s/a;return i=(i=(i*=4)<1?.33:i)>4?4:i,n=(n=(n*=4)<1?.33:n)>4?4:n,t.x>e.x?t.x-=i:t.x<e.x&&(t.x+=i),t.y>e.y?t.y-=n:t.y<e.y&&(t.y+=n),t}function N(t,e,a,s,i,n,r){var o=Math.PI/2*3,c=t,h=e,l=Math.PI/a;n.strokeSyle="#000",n.beginPath(),n.moveTo(t,e-s);for(var u=0;u<a;u++)c=t+Math.cos(o)*s,h=e+Math.sin(o)*s,n.lineTo(c,h),o+=l,c=t+Math.cos(o)*i,h=e+Math.sin(o)*i,n.lineTo(c,h),o+=l;n.lineTo(t,e-s),n.closePath(),n.strokeStyle=r,n.stroke(),n.fillStyle=r,n.fill()}var I=function(t){t&&t instanceof Function&&a.e(15).then(a.bind(null,48)).then((function(e){var a=e.getCLS,s=e.getFID,i=e.getFCP,n=e.getLCP,r=e.getTTFB;a(t),s(t),i(t),n(t),r(t)}))},A=a(2);r.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(u.a,{children:Object(p.jsxs)(A.c,{children:[Object(p.jsx)(A.a,{path:"/",element:Object(p.jsx)(m,{})}),Object(p.jsx)(A.a,{path:"/osrs",element:Object(p.jsx)(S,{})}),Object(p.jsx)(A.a,{path:"/github-pages/osrs",element:Object(p.jsx)(S,{})}),Object(p.jsx)(A.a,{path:"/mage-run",element:Object(p.jsx)(D,{})}),Object(p.jsx)(A.a,{path:"/github-pages/mage-run",element:Object(p.jsx)(D,{})}),Object(p.jsx)(A.a,{path:"*",element:Object(p.jsx)("main",{style:{padding:"1rem"},children:Object(p.jsx)("p",{children:"There's nothing here!"})})})]})})}),document.getElementById("root")),I()},8:function(t,e,a){"use strict";a.r(e),a.d(e,"loot",(function(){return i}));var s=a(17);function i(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{points:3e4,runCompletion:!1,pets:!0};return new Promise((function(r,o){var c=!1;"create"===e&&(e="cg",c=!0),a(22)("./"+e).then((function(e){var a=JSON.parse(JSON.stringify(e)).data;if(c&&(a=JSON.parse(JSON.stringify(i.createData)),i.pets||delete a.pet,a.pet&&"string"==typeof a.pet.rate&&(a.pet.rate=Number(a.pet.rate.split("/")[1])),a.items.forEach((function(t,e,a){if("string"==typeof t.rate){var s=t.rate.split("/");try{a[e].rate=parseFloat(s[0])/parseFloat(s[1])}catch(i){console.log(i)}}}))),!a.chance){var o=0;a.items.forEach((function(t){o+=t.rate})),a.chance=100*o}"cox"===a.name&&(a.chance=i.points/8678),a.pet&&(i.pets?a.pet.getPet=!0:a.pet.getPet=!1),i.runCompletion&&r(Object(s.completion)(a)),r(n(t,a))}))}))}function n(t,e){var a=[],s="f"===t,i=[];s&&(t=1e6);var n=0;e.items.forEach((function(t){n+=t.rate,i.push(0)})),e.pet&&e.pet.getPet&&i.push(0);for(var r=0;r<t&&(o(r),"zulrah"===e.name&&o(r),c(r),!s||i.some((function(t){return t<=0})));r++);return a;function o(t){var s,r;if(100*Math.random()<e.chance)for(var o=(s=n,r=0,Math.random()*(s-r)+r),c=0,h=0;h<e.items.length;h++)if((c+=e.items[h].rate)>=o){a.push({kc:t+1,name:e.items[h].name}),i[h]+=1;break}}function c(t){var s;e.pet&&((s=e.pet.rate,Math.floor(Math.random()*s)+1)===e.pet.rate&&("cox"===e.name?a.length&&a[a.length-1].kc===t+1&&(a.push({kc:t+1,name:e.pet.name}),e.pet.getPet&&(i[i.length-1]+=1)):(a.push({kc:t+1,name:e.pet.name}),e.pet.getPet&&(i[i.length-1]+=1))))}}}},[[47,13,14]]]);
//# sourceMappingURL=main.ed7d4683.chunk.js.map