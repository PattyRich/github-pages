(this["webpackJsonpgithub-pages"]=this["webpackJsonpgithub-pages"]||[]).push([[13],{18:function(t,e,a){"use strict";a.r(e),a.d(e,"completion",(function(){return i}));var s=a(7),n=function(t,e){return t+e};function i(t){var e=[],a=0;if(t.items.forEach((function(t){a+=t.rate})),t.items.forEach((function(s){e.push(s.rate/a*(t.chance/100))})),e.push(1-e.reduce(n)),e.length>20)return[];var i=e.reduce((function(t,e){return t.concat(t.map((function(t){return[e].concat(Object(s.a)(t))})))}),[[]]);i.sort((function(t,e){return t.length>=e.length?1:-1}));for(var r=function(t){for(var e=[];e.length<=t;){e.unshift(1);for(var a=1;a<e.length-1;a++)e[a]+=e[a+1]}return e}(e.length),o=0,c=0;c<e.length;c++)for(var l=Math.pow(-1,e.length-1-c),h=0;h<r[c];h++){if(0!==c)o+=l*(1/(1-i[r.slice(r.length-c).reduce(n)+h].reduce(n)));else o+=1*l}return"zulrah"===t.name?Math.round(o/2):Math.round(o)}},19:function(t,e,a){"use strict";function s(t,e){return function(t,e){var a=[];t.sort((function(t,e){return t.rarity>e.rarity?1:-1}));for(var s=0;s<t.length;s++){for(var i=0,r=0;r<e;r++){if(Math.random()<t[s].rarity)if(t[s].quantity.includes("-")){var o=t[s].quantity.split("-");i+=Math.round(n(Number(o[0]),Number(o[1])))}else i+=Number(t[s].quantity)}a.push({name:t[s].name,amount:i})}return a}(t,e)}function n(t,e){return Math.random()*(t-e)+e}a.r(e),a.d(e,"totalLooter",(function(){return s}))},23:function(t,e,a){var s={"./arma":[25,0],"./arma.js":[25,0],"./bandos":[26,1],"./bandos.js":[26,1],"./cg":[27,2],"./cg.js":[27,2],"./completion":[18],"./completion-old":[28,3],"./completion-old.js":[28,3],"./completion.js":[18],"./corp":[29,4],"./corp.js":[29,4],"./cox":[30,5],"./cox.js":[30,5],"./looter":[8],"./looter.js":[8],"./nex":[31,6],"./nex.js":[31,6],"./pnm":[32,7],"./pnm.js":[32,7],"./sara":[33,8],"./sara.js":[33,8],"./tob":[34,9],"./tob.js":[34,9],"./totalLooter":[19],"./totalLooter.js":[19],"./vorkath":[35,10],"./vorkath.js":[35,10],"./zammy":[36,11],"./zammy.js":[36,11],"./zulrah":[37,12],"./zulrah.js":[37,12]};function n(t){if(!a.o(s,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=s[t],n=e[0];return Promise.all(e.slice(1).map(a.e)).then((function(){return a(n)}))}n.keys=function(){return Object.keys(s)},n.id=23,t.exports=n},42:function(t,e,a){},43:function(t,e,a){},46:function(t,e,a){},48:function(t,e,a){},49:function(t,e,a){"use strict";a.r(e);var s=a(1),n=a.n(s),i=a(24),r=a.n(i),o=(a(42),a(9)),c=a(10),l=a(13),h=a(12),u=(a(43),a(15)),d=a(0),p=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)("div",{children:Object(d.jsx)("nav",{children:Object(d.jsxs)("ul",{id:"navigation",children:[Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{to:"/",children:"Home"})}),Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{to:"/osrs",children:"osrs"})}),Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{to:"/mage-run",children:"Mage run"})}),Object(d.jsx)("li",{children:Object(d.jsx)("a",{href:"https://github.com/PattyRich/github-pages",children:" repo this comes from "})})]})})})})}}]),a}(n.a.Component),m=p,f=a(7),b=a(17),x=a(20),j=a(4),v=a.n(j),g=a(6),y=a(3),O=(a(46),a(8)),k=a(19),w=function(t){return Object(s.useEffect)((function(){return console.log("rerender"),function(){return console.log("tearing down")}}),[]),Object(d.jsx)("div",{className:"items",children:t.loot?t.loot.map((function(t){return 0==t.amount?null:Object(d.jsxs)("span",{className:"item",children:[Object(d.jsx)("a",{href:"https://oldschool.runescape.wiki/w/".concat(t.name.split(" ").join("_")),target:"_blank",rel:"noreferrer",children:Object(d.jsx)("img",{src:"".concat("/github-pages","/assets/").concat(t.name,".png"),title:t.name,alt:t.name})}),t.amount]})})):null})},C=a(22),S=a.n(C),z=function(t){Object(l.a)(s,t);var e=Object(h.a)(s);function s(){var t;if(Object(o.a)(this,s),(t=e.call(this)).clearData=function(){t.setState({rewardList:[],rewardCount:0,rewards:null,fullLootRewards:[]})},t.state={mode:"cox",rewards:null,rolls:"",nothingCounter:0,rewardList:[],rewardCount:0,rewardCountConst:0,points:3e4,pets:!0,histogramData:[],simulations:1e3,fullRewards:!1,fullLootRewards:[],icons:{},bosses:[],teamSize:4,cms:!1,createData:{bossName:"Name me",numItems:1,items:[{name:"Saradomin godsword",rate:"1/100"}],pet:{name:"Baby mole",rate:"1/5000"}}},void 0!==localStorage.getItem("bosses")&&null!==localStorage.getItem("bosses")&&localStorage.getItem("bosses").length)try{t.state.bosses=JSON.parse(localStorage.getItem("bosses"))}catch(a){console.log(a,"error parsing bosses from cache")}return t.onChangeValue=t.onChangeValue.bind(Object(y.a)(t)),t.onChangeValueInput=t.onChangeValueInput.bind(Object(y.a)(t)),t.go=t.go.bind(Object(y.a)(t)),t.stopInterval=t.stopInterval.bind(Object(y.a)(t)),t.graphSimulation=t.graphSimulation.bind(Object(y.a)(t)),t.lootFunction=t.lootFunction.bind(Object(y.a)(t)),t.saveBoss=t.saveBoss.bind(Object(y.a)(t)),t.selectBoss=t.selectBoss.bind(Object(y.a)(t)),t.deleteBoss=t.deleteBoss.bind(Object(y.a)(t)),t.completion=t.completion.bind(Object(y.a)(t)),t.clearData=t.clearData.bind(Object(y.a)(t)),t.interval=null,t}return Object(c.a)(s,[{key:"onChangeValue",value:function(){var t=Object(g.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({mode:e.target.value}),this.completion(e.target.value);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"saveBoss",value:function(){var t=this;if(!(this.state.bosses.findIndex((function(e){return e.bossName===t.state.createData.bossName}))>-1)){var e=this.state.bosses;e.push(this.state.createData),this.setState({bosses:e}),localStorage.setItem("bosses",JSON.stringify(e))}}},{key:"selectBoss",value:function(t){var e=this.state.bosses.findIndex((function(e){return e.bossName===t}));this.setState({createData:this.state.bosses[e]})}},{key:"deleteBoss",value:function(){var t=this,e=this.state.bosses.findIndex((function(e){return e.bossName===t.state.createData.bossName}));if(!(e<0)){var a=this.state.bosses;a.splice(e,1),this.setState({bosses:a}),localStorage.setItem("bosses",JSON.stringify(a))}}},{key:"onChangeValueInput",value:function(t,e){var a=this;this.setState(Object(x.a)({},t,e.target.value),(function(){"points"!=t&&"teamSize"!=t||a.completion()}))}},{key:"changeCreateData",value:function(t,e,a){var s=Object(b.a)({},this.state.createData);function n(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}function i(t){return t.replace(/[^0-9/.]/g,"")}"num"===t?(s.numItems=e,s.items.length>=s.numItems?s.items.pop():s.items.push({name:"",rate:"1/100"}),this.setState({createData:s})):"name"===t?s.items[a].name=n(e):"rate"===t?s.items[a].rate=i(e):"petRate"===t?s.pet.rate=i(e):"petName"===t?s.pet.name=n(e):"bossName"===t&&(s.bossName=e),this.setState({createData:s})}},{key:"addIcons",value:function(){var t=Object(g.a)(v.a.mark((function t(e){var s,n,i,r,o,c,l,h,u=this,d=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=function(t){var e=t;return t.includes("+")&&(e=t.replaceAll("+","%2B")),new Promise(function(){var a=Object(g.a)(v.a.mark((function a(s,i){var r,o,c;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n[t]){a.next=31;break}return a.prev=1,n[t]="loading",a.next=5,fetch('https://api.osrsbox.com/items?where={ "name": "'.concat(e,'", "duplicate": false }'));case 5:return r=a.sent,a.next=8,r.json();case 8:o=a.sent,c=o._items[0].icon,n[t]=c,s(),a.next=31;break;case 14:a.prev=14,a.t0=a.catch(1),a.next=29;break;case 21:a.sent,console.log("Added item ".concat(t," to public assets folder. (should see on refresh)")),a.next=29;break;case 25:a.prev=25,a.t1=a.catch(17),console.log(a.t1),console.log("Failed to add item to assets folder. Is the python server running????");case 29:console.log(a.t0),s();case 31:s();case 32:case"end":return a.stop()}}),a,null,[[1,14],[17,25]])})));return function(t,e){return a.apply(this,arguments)}}())},s=d.length>1&&void 0!==d[1]?d[1]:null,n=Object(b.a)({},this.state.icons),!s){t.next=10;break}for(i=[],r=0;r<s.length;r++)i.push(h(s[r].name));return t.next=8,Promise.all(i);case 8:return this.setState({icons:n}),t.abrupt("return");case 10:if("create"!==e){t.next=19;break}for(o=Object(b.a)({},this.state.createData),c=[],l=0;l<o.items.length;l++)c.push(h(o.items[l].name));return o.pet&&c.push(h(o.pet.name)),t.next=17,Promise.all(c);case 17:return this.setState({icons:n}),t.abrupt("return");case 19:a(23)("./"+e).then(function(){var t=Object(g.a)(v.a.mark((function t(e){var a,s,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=JSON.parse(JSON.stringify(e)).data,s=[],i=0;i<a.items.length;i++)s.push(h(a.items[i].name));return s.push(h(a.pet.name)),t.next=6,Promise.all(s);case 6:u.setState({icons:n});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 20:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"simulate",value:function(){var t=this;this.interval&&clearInterval(this.interval);var e=Number(this.state.rolls);e>100&&(e=100),this.setState({rewardList:[],rewardCount:0,rewardCountConst:e}),this.interval=setInterval(Object(g.a)(v.a.mark((function a(){var s;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=null,!t.state.rewardCountConst){a.next=6;break}return a.next=4,t.lootFunction(e,t.state.mode,t.state);case 4:s=a.sent,t.setState({rewardList:[s].concat(Object(f.a)(t.state.rewardList)),rewardCount:t.state.rewardCount+t.state.rewardCountConst});case 6:case"end":return a.stop()}}),a)}))),2e3)}},{key:"go",value:function(){var t=Object(g.a)(v.a.mark((function t(){var e,a,s,n,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=[],!this.state.fullRewards){t.next=18;break}return t.prev=2,a=N(this.state.mode),t.next=6,fetch('https://api.osrsbox.com/monsters?where={ "name": "'.concat(a,'", "duplicate": false }'));case 6:return s=t.sent,t.next=9,s.json();case 9:n=t.sent,i=Object(k.totalLooter)(n._items[0].drops||null,this.state.rolls),this.setState({fullLootRewards:i}),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(2);case 16:t.next=22;break;case 18:return t.next=20,this.lootFunction(this.state.rolls,this.state.mode,this.state);case 20:e=t.sent,this.setState({rewards:e});case 22:e&&0===e.length?this.setState({nothingCounter:this.state.nothingCounter+1}):this.setState({nothingCounter:0});case 23:case"end":return t.stop()}}),t,this,[[2,14]])})));return function(){return t.apply(this,arguments)}}()},{key:"graphSimulation",value:function(){var t=Object(g.a)(v.a.mark((function t(){var e,a,s,n,i,r,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],a=[],s=0;case 3:if(!(s<this.state.simulations)){t.next=12;break}return t.next=6,this.lootFunction("f",this.state.mode,this.state);case 6:n=t.sent,e.push(n[n.length-1].kc),a.push(n.length);case 9:s++,t.next=3;break;case 12:i=[{x:e,type:"histogram"}],r=[{x:e,y:a,mode:"markers",type:"scatter"}],o={xaxis:{title:{text:"KC"}},yaxis:{title:{text:"# of people"}}},S.a.newPlot("histogram",i,o),o.yaxis.title.text="# of items received",S.a.newPlot("scatter",r,o);case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=Object(g.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.completion();case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"lootFunction",value:function(t,e,a){var s=Number(t);return"create"===this.state.mode&&this.completion(),s&&t?Object(O.loot)(s,e,a):0===s?Object(O.loot)("f",e,a):Object(O.loot)(t,e,a)}},{key:"completion",value:function(){var t=Object(g.a)(v.a.mark((function t(e){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.loot)(null,e||this.state.mode,Object(b.a)({runCompletion:!0},this.state));case 2:a=t.sent,this.setState({completion:a});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"stopInterval",value:function(){this.interval&&clearInterval(this.interval)}},{key:"componentWillUnmount",value:function(){this.stopInterval()}},{key:"render",value:function(){var t=this;return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"box",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"radio",value:"cox",name:"",checked:"cox"===this.state.mode,onChange:this.onChangeValue})," Cox",Object(d.jsx)("input",{type:"radio",value:"tob",name:"",checked:"tob"===this.state.mode,onChange:this.onChangeValue})," Tob",Object(d.jsx)("input",{type:"radio",value:"cg",name:"",checked:"cg"===this.state.mode,onChange:this.onChangeValue})," Corrupted Gauntlet",Object(d.jsx)("input",{type:"radio",value:"corp",name:"",checked:"corp"===this.state.mode,onChange:this.onChangeValue})," Corp",Object(d.jsx)("input",{type:"radio",value:"pnm",name:"",checked:"pnm"===this.state.mode,onChange:this.onChangeValue})," Phosani's Nightmare",Object(d.jsx)("input",{type:"radio",value:"nex",name:"",checked:"nex"===this.state.mode,onChange:this.onChangeValue})," Nex",Object(d.jsx)("input",{type:"radio",value:"zulrah",name:"",checked:"zulrah"===this.state.mode,onChange:this.onChangeValue})," Zulrah",Object(d.jsx)("input",{type:"radio",value:"vorkath",name:"",checked:"vorkath"===this.state.mode,onChange:this.onChangeValue})," Vorkath",Object(d.jsx)("input",{type:"radio",value:"arma",name:"",checked:"arma"===this.state.mode,onChange:this.onChangeValue})," Arma",Object(d.jsx)("input",{type:"radio",value:"bandos",name:"",checked:"bandos"===this.state.mode,onChange:this.onChangeValue})," Bandos",Object(d.jsx)("input",{type:"radio",value:"sara",name:"",checked:"sara"===this.state.mode,onChange:this.onChangeValue})," Sara",Object(d.jsx)("input",{type:"radio",value:"zammy",name:"",checked:"zammy"===this.state.mode,onChange:this.onChangeValue})," Zammy",Object(d.jsx)("input",{type:"radio",value:"create",name:"",checked:"create"===this.state.mode,onChange:this.onChangeValue})," Create Your Own Boss"]}),"create"===this.state.mode?Object(d.jsxs)("div",{style:{margin:"30px"},children:[Object(d.jsxs)("div",{style:{padding:"10px",margin:"10px 0px",border:"solid black 2px"},children:["Use fractions for rate or you will crash the webpage :)",Object(d.jsx)("br",{}),"Item names must be spelled exactly how they are on the wiki",Object(d.jsx)("br",{}),Object(d.jsx)("button",{style:{margin:"3px"},onClick:this.saveBoss,children:" Save boss "}),Object(d.jsx)("button",{style:{margin:"3px"},onClick:this.deleteBoss,children:" Delete boss "}),"\xa0 Boss name: ",Object(d.jsx)("input",{type:"text",value:this.state.createData.bossName,onChange:function(e){return t.changeCreateData("bossName",e.target.value)}}),"\xa0 Load previous boss.",Object(d.jsxs)("select",{value:"",onChange:function(e){return t.selectBoss(e.target.value)},children:[Object(d.jsx)("option",{value:""}),this.state.bosses.map((function(t,e){return Object(d.jsx)("option",{value:t.bossName,children:t.bossName})}))]})]}),"Number of unique items you must obtain. \xa0",Object(d.jsx)("button",{onClick:function(){return t.changeCreateData("num",t.state.createData.numItems-1)},children:" - "}),Object(d.jsxs)("span",{children:[" ",this.state.createData.numItems," "]}),Object(d.jsx)("button",{onClick:function(){return t.changeCreateData("num",t.state.createData.numItems+1)},children:" + "}),this.state.createData.items.map((function(e,a){return Object(d.jsxs)("div",{children:["Item ",a+1,": Name: ",Object(d.jsx)("input",{type:"text",value:t.state.createData.items[a].name,onChange:function(e){return t.changeCreateData("name",e.target.value,a)}}),"\xa0 Rate: ",Object(d.jsx)("input",{type:"text",value:t.state.createData.items[a].rate,onChange:function(e){return t.changeCreateData("rate",e.target.value,a)}})]})})),this.state.pets?Object(d.jsxs)("div",{children:["Pet: Name: ",Object(d.jsx)("input",{type:"text",value:this.state.createData.pet.name,onChange:function(e){return t.changeCreateData("petName",e.target.value)}}),"\xa0 Rate: ",Object(d.jsx)("input",{type:"text",value:this.state.createData.pet.rate,onChange:function(e){return t.changeCreateData("petRate",e.target.value)}})]}):null]}):null,Object(d.jsx)("label",{children:"Number of rolls (f or nothing for completion) "}),Object(d.jsx)("input",{type:"text",value:this.state.rolls,onChange:function(e){return t.onChangeValueInput("rolls",e)}}),"nex"==this.state.mode&&Object(d.jsxs)("span",{children:["\xa0 ",Object(d.jsx)("label",{children:" Team size "}),Object(d.jsx)("input",{type:"text",value:this.state.teamSize,onChange:function(e){return t.onChangeValueInput("teamSize",e)}})]}),Object(d.jsx)("br",{}),"Include pet for completion? ",Object(d.jsx)("input",{type:"checkbox",onChange:function(){t.setState({pets:!t.state.pets}),t.clearData()},checked:this.state.pets}),Object(d.jsx)("br",{}),"cox"===this.state.mode?Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{children:"Number of cox points per raid "}),Object(d.jsx)("input",{type:"text",value:this.state.points,onChange:function(e){return t.onChangeValueInput("points",e)}}),"\xa0 Challenge Mode? ",Object(d.jsx)("input",{type:"checkbox",onChange:function(){t.setState({cms:!t.state.cms})},checked:this.state.cms})]}):null,Object(d.jsx)("br",{}),Object(d.jsx)("button",{onClick:this.go,children:" Go! "}),"\xa0 or",Object(d.jsx)("button",{style:{margin:"10px"},onClick:function(){return t.simulate()},children:" Simulate daily raids. (must be rolls <= 100) "}),this.state.rewardList.length?Object(d.jsx)("button",{style:{background:"#c90c1c"},onClick:this.stopInterval,children:" Stop "}):null,this.state.completion?Object(d.jsxs)("span",{children:[" Average completion without pet is: ",this.state.completion," kc "]}):null,"create"===this.state.mode?Object(d.jsx)("span",{children:" (This will be wrong if your rates are very common) "}):null,Object(d.jsx)("br",{}),Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{children:" Plot results of a # of simulations  "}),Object(d.jsx)("input",{type:"text",value:this.state.simulations,onChange:function(e){return t.onChangeValueInput("simulations",e)}})]}),Object(d.jsx)("button",{onClick:this.graphSimulation,children:" Plot. "}),Object(d.jsxs)("div",{className:"items",children:[this.state.rewards?this.state.rewards.map((function(t){return Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("a",{href:"https://oldschool.runescape.wiki/w/".concat(t.name.split(" ").join("_")),target:"_blank",rel:"noreferrer",children:Object(d.jsx)("img",{src:"".concat("/github-pages","/assets/").concat(t.name,".png"),title:t.name,alt:t.name})}),t.kc]})})):null,this.state.rewards&&0===this.state.rewards.length?"Nothing x"+this.state.nothingCounter:null,this.state.fullRewards?Object(d.jsx)(w,{icons:this.state.icons,loot:this.state.fullLootRewards}):null]})]}),this.state.rewardList.length?Object(d.jsxs)("div",{className:"box",children:["Overall KC: ",this.state.rewardCount,Object(d.jsx)("div",{className:"day",children:this.state.rewardList.length?this.state.rewardList.map((function(e,a){var s=new Date;return s.setDate(s.getDate()+t.state.rewardList.length-(a+1)),s=s.toLocaleString().split(",")[0],Object(d.jsxs)("div",{className:"flexCol",children:[s,Object(d.jsx)("div",{className:"items",children:e.length?e.map((function(e){return Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("a",{href:"https://oldschool.runescape.wiki/w/".concat(e.name.split(" ").join("_")),target:"_blank",rel:"noreferrer",children:Object(d.jsx)("img",{src:"".concat("/github-pages","/assets/").concat(e.name,".png"),title:e.name,alt:e.name})}),e.kc," (",t.state.rewardCountConst*(t.state.rewardList.length-a)-(t.state.rewardCountConst-e.kc),")"]})})):null}),Object(d.jsx)("hr",{})]})})):null})]}):null,Object(d.jsx)("div",{id:"histogram",children:" "}),Object(d.jsx)("div",{id:"scatter",children:" "})]})}}]),s}(n.a.Component),D=z;function N(t){switch(t){case"corp":return"Corporeal Beast";case"pnm":return"Phosani's Nightmare";case"zulrah":return"Zulrah";case"vorkath":return"Vorkath";case"arma":return"Kree'arra";case"bandos":return"General Graardor";case"zammy":return"K'ril Tsutsaroth";case"sara":return"Commander Zilyana";default:return null}}a(48);var A=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).state={widthAmt:17,heightAmt:6,headDirection:"olm-center",xpDrops:[]},t.resize=t.resize.bind(Object(y.a)(t)),t.canvas=n.a.createRef(),t.canvas2=n.a.createRef(),t.ctx=null,t.player={x:0,y:0},t.interval=null,t.destination={x:0,y:0},t.destinationOnTick={x:0,y:0},t.offset=300,t.olm={tta:4},t.oneTickBlock=!1,t.playerAttackcd=0,t.playerAttack=null,t.playerAttackQueued=!1,t.olmAttack=null,t.resize=t.resize.bind(Object(y.a)(t)),t.drawTiles=t.drawTiles.bind(Object(y.a)(t)),t.getTile=t.getTile.bind(Object(y.a)(t)),t.attackWillHit=!1,t}return Object(c.a)(a,[{key:"resize",value:function(){var t,e,a=window.innerHeight,s=window.innerWidth;s/a>2.83333333333?e=2.83333333333*(t=a):t=(e=s)/2.83333333333,t<300&&(e=2.83333333333*(t=300)),t+this.offset>a&&(e=2.83333333333*(t=a-this.offset)),this.tileSize=t/this.state.heightAmt,t+=this.offset,this.canvas.current.height=t,this.canvas.current.width=e,this.canvas2.current.height=t,this.canvas2.current.width=e,this.drawBoard()}},{key:"drawBoard",value:function(){this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.drawTiles(),this.drawChar(),this.drawDesination(),this.drawClaw(),this.drawStar&&(this.drawStar=!1,this.attackWillHit?M(170,200,20,30,25,this.ctx,"red"):M(170,200,20,30,25,this.ctx,"blue"))}},{key:"drawClaw",value:function(){this.ctx.fillStyle="#00FFEE",this.ctx.fillRect(25,75,300,200),this.ctx.fillStyle="#000000",this.ctx.font="40px serif",this.ctx.fillText("Mage hand",85,150)}},{key:"drawChar",value:function(){this.ctx.strokeStyle="#00FFEE",this.ctx.strokeRect(this.player.x*this.tileSize,this.offset+this.player.y*this.tileSize,this.tileSize,this.tileSize)}},{key:"drawDesination",value:function(){this.destinationOnTick?this.player.x===this.destinationOnTick.x&&this.player.y===this.destinationOnTick.y||(this.ctx.strokeStyle="#FFFF00",this.ctx.strokeRect(this.destinationOnTick.x*this.tileSize,this.offset+this.destinationOnTick.y*this.tileSize,this.tileSize,this.tileSize)):this.destination&&(this.player.x===this.destination.x&&this.player.y===this.destination.y||(this.ctx.strokeStyle="#FFFF00",this.ctx.strokeRect(this.destination.x*this.tileSize,this.offset+this.destination.y*this.tileSize,this.tileSize,this.tileSize)))}},{key:"drawTiles",value:function(){this.ctx.strokeStyle="grey";for(var t=0;t<this.state.heightAmt;t++)for(var e=0;e<this.state.widthAmt;e++)this.ctx.strokeRect(e*this.tileSize,this.offset+t*this.tileSize,this.tileSize,this.tileSize);this.ctx.strokeStyle="red";for(var a=0;a<=1;a++)this.ctx.strokeRect(1*this.tileSize,this.offset+a*this.tileSize,this.tileSize,this.tileSize),this.ctx.strokeRect(6*this.tileSize,this.offset+a*this.tileSize,this.tileSize,this.tileSize),this.ctx.strokeRect(10*this.tileSize,this.offset+a*this.tileSize,this.tileSize,this.tileSize),this.ctx.strokeRect(13*this.tileSize,this.offset+a*this.tileSize,this.tileSize,this.tileSize)}},{key:"getTile",value:function(t){var e=t.offsetX,a=t.offsetY-this.offset,s=Math.floor(e/this.tileSize),n=Math.floor(a/this.tileSize);return t.offsetX>25&&t.offsetX<325&&t.offsetY>75&&t.offsetY<275?(this.attackLoop=!0,this.player.x>=13?this.player.x%2==0?{x:12,y:this.player.y}:{x:11,y:this.player.y}:{x:this.player.x,y:this.player.y}):(this.attackLoop=!1,n<0&&(n=0),s>16&&(s=16),n>this.state.heightAmt&&(n=this.state.heightAmt-1),{x:s,y:n})}},{key:"updateDestinationAfterTimeout",value:function(){this.destinationOnTick&&(this.destination=JSON.parse(JSON.stringify(this.destinationOnTick)),this.destinationOnTick=null)}},{key:"moveChar",value:function(){if(this.destination){var t=this.destination.x-this.player.x,e=this.destination.y-this.player.y,a=Math.abs(t),s=Math.abs(e),n=a-s;if(n>=2)if(a>s){var i=this.player.x+(this.destination.x-this.player.x>0?2:-2);this.player={x:i,y:this.player.y}}else{var r=this.player.y+(this.destination.y-this.player.y>0?2:-2);this.player={x:this.player.x,y:r}}else{var o=t;t>2&&(o=2),t<-2&&(o=-2);var c=e;e>2&&(c=2),e<-2&&(c=-2),1===n&&s>=2&&a>=2&&(c>0&&(c-=1),c<0&&(c+=1)),-1===n&&s>=2&&a>=2&&(o>0&&(o-=1),o<0&&(o+=1)),this.player={x:this.player.x+o,y:this.player.y+c},0==t&&0==e&&(this.destination=null)}}}},{key:"olmAction",value:function(){this.olm.tta=this.olm.tta-1,0==this.olm.tta&&(this.olm.tta=4,"olm-left"==this.state.headDirection?this.player.x<=1?this.olmAttack={x:this.canvas.current.width/2,y:this.offset-150}:this.player.x>1&&this.player.x<=8?1==Math.floor(2*Math.random())?this.setState({headDirection:"olm-center"}):this.olmAttack={x:this.canvas.current.width/2,y:this.offset-150}:this.player.x>=9&&this.player.x<=12?this.setState({headDirection:"olm-center"}):this.setState({headDirection:"olm-right"}):"olm-center"==this.state.headDirection?this.player.x>1&&this.player.x<=12?this.olmAttack={x:this.canvas.current.width/2,y:this.offset-150}:this.player.x<=1?this.setState({headDirection:"olm-left"}):this.setState({headDirection:"olm-right"}):this.player.x>=13?this.olmAttack={x:this.canvas.current.width/2,y:this.offset-150}:this.player.x>1&&this.player.x<=12?this.player.x<=6?this.attackWillHit?this.setState({headDirection:"olm-left"}):this.setState({headDirection:"olm-center"}):1==Math.floor(2*Math.random())?this.setState({headDirection:"olm-center"}):this.olmAttack={x:this.canvas.current.width/2,y:this.offset-150}:this.setState({headDirection:"olm-left"}),this.attackWillHit=!1)}},{key:"playerAttackFunc",value:function(){if(this.attackLoop&&this.player.x<=12&&this.playerAttackcd<=0){var t=new Audio("".concat("/github-pages","/assets/trident.mp3"));t.addEventListener("loadeddata",(function(){t.play()}));var e=this.playerCords();4==Math.floor(5*Math.random())?this.attackWillHit=!1:(this.attackWillHit=!0,this.procXp()),this.playerAttack={x:e.x,y:e.y},this.playerAttackcd=4}}},{key:"procXp",value:function(){var t=this,e=Object(f.a)(this.state.xpDrops);e.push("sdafijadsfjsal"),this.setState({xpDrops:e}),setTimeout((function(){var e=Object(f.a)(t.state.xpDrops);e.shift(),t.setState({xpDrops:e})}),4e3)}},{key:"gameTick",value:function(){this.playerAttackcd-=1,this.olmAction(),this.moveChar(),this.playerAttackFunc(),this.drawBoard()}},{key:"animate",value:function(){var t=this;this.ctx2.clearRect(0,0,this.canvas2.current.width,this.canvas2.current.height),requestAnimationFrame((function(){return t.animate()}));try{this.olmAttack&&(this.ctx2.beginPath(),this.olmAttack=I(this.olmAttack,this.playerCords()),this.ctx2.arc(this.olmAttack.x,this.olmAttack.y,10,0,2*Math.PI,!1),this.ctx2.fillStyle="green",this.ctx2.fill())}catch(e){}try{this.ctx2.beginPath(),this.playerAttack=I(this.playerAttack,{x:175,y:200}),null==this.playerAttack&&(this.drawStar=!0,this.attackWillHit?M(170,200,20,30,25,this.ctx,"red"):M(170,200,20,30,25,this.ctx,"blue")),this.ctx2.arc(this.playerAttack.x,this.playerAttack.y,10,0,2*Math.PI,!1),this.ctx2.fillStyle="blue",this.ctx2.fill()}catch(e){}}},{key:"playerCords",value:function(){return{x:this.player.x*this.tileSize+this.tileSize/2,y:this.offset+this.player.y*this.tileSize+this.tileSize/2}}},{key:"componentDidMount",value:function(){var t=this,e=this.canvas.current.getContext("2d");this.ctx=e;var a=this.canvas2.current.getContext("2d");this.ctx2=a,this.resize(),this.drawBoard(),window.addEventListener("resize",this.resize),window.addEventListener("mousedown",(function(e){t.destinationOnTick=t.getTile(e),t.drawBoard(),setTimeout((function(){t.updateDestinationAfterTimeout()}),75)})),this.interval=setInterval((function(){t.gameTick()}),600),this.animate()}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){return Object(d.jsxs)("div",{id:"background",children:[Object(d.jsxs)("div",{className:"parent",children:[Object(d.jsx)("img",{className:"olm ".concat(this.state.headDirection," child"),src:"".concat("/github-pages","/assets/olm.png"),height:this.offset-20}),this.state.xpDrops.map((function(){return Object(d.jsxs)("div",{style:{color:"white"},className:"fade-out child2",children:[Object(d.jsx)("img",{className:"",src:"".concat("/github-pages","/assets/magic-icon.png"),height:20}),"123"]})}))]}),Object(d.jsx)("canvas",{id:"olm-room",ref:this.canvas}),Object(d.jsx)("canvas",{id:"projectiles",ref:this.canvas2})]})}}]),a}(n.a.Component);function I(t,e){var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);if(t.x<0)return t;if(a<30&&s<30)return null;var n=a/s,i=s/a;return n=(n=(n*=4)<1?.33:n)>4?4:n,i=(i=(i*=4)<1?.33:i)>4?4:i,t.x>e.x?t.x-=n:t.x<e.x&&(t.x+=n),t.y>e.y?t.y-=i:t.y<e.y&&(t.y+=i),t}function M(t,e,a,s,n,i,r){var o=Math.PI/2*3,c=t,l=e,h=Math.PI/a;i.strokeSyle="#000",i.beginPath(),i.moveTo(t,e-s);for(var u=0;u<a;u++)c=t+Math.cos(o)*s,l=e+Math.sin(o)*s,i.lineTo(c,l),o+=h,c=t+Math.cos(o)*n,l=e+Math.sin(o)*n,i.lineTo(c,l),o+=h;i.lineTo(t,e-s),i.closePath(),i.strokeStyle=r,i.stroke(),i.fillStyle=r,i.fill()}var T=function(t){t&&t instanceof Function&&a.e(16).then(a.bind(null,50)).then((function(e){var a=e.getCLS,s=e.getFID,n=e.getFCP,i=e.getLCP,r=e.getTTFB;a(t),s(t),n(t),i(t),r(t)}))},L=a(2);r.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(u.a,{children:Object(d.jsxs)(L.c,{children:[Object(d.jsx)(L.a,{path:"/",element:Object(d.jsx)(m,{})}),Object(d.jsx)(L.a,{path:"/osrs",element:Object(d.jsx)(D,{})}),Object(d.jsx)(L.a,{path:"/github-pages/osrs",element:Object(d.jsx)(D,{})}),Object(d.jsx)(L.a,{path:"/mage-run",element:Object(d.jsx)(A,{})}),Object(d.jsx)(L.a,{path:"/github-pages/mage-run",element:Object(d.jsx)(A,{})}),Object(d.jsx)(L.a,{path:"*",element:Object(d.jsx)("main",{style:{padding:"1rem"},children:Object(d.jsx)("p",{children:"There's nothing here!"})})})]})})}),document.getElementById("root")),T()},8:function(t,e,a){"use strict";a.r(e),a.d(e,"loot",(function(){return i}));var s=a(18),n=["nex"];function i(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{points:3e4,runCompletion:!1,pets:!0,cms:!1,teamSize:1};return new Promise((function(r,c){var l=!1;"create"===e&&(e="cg",l=!0),a(23)("./"+e).then((function(e){var a=JSON.parse(JSON.stringify(e)).data;if(l&&(a=JSON.parse(JSON.stringify(i.createData)),i.pets||delete a.pet,a.pet&&"string"==typeof a.pet.rate&&(a.pet.rate=Number(a.pet.rate.split("/")[1])),a.items.forEach((function(t,e,a){if("string"==typeof t.rate){var s=t.rate.split("/");try{a[e].rate=parseFloat(s[0])/parseFloat(s[1])}catch(n){console.log(n)}}}))),n.includes(a.name)&&(a.items.forEach((function(t){t.rate/=i.teamSize})),a.pet.rate*=i.teamSize),!a.chance){var c=0;a.items.forEach((function(t){c+=t.rate})),a.chance=100*c}"cox"===a.name&&(a.chance=i.points/8678,i.cms&&(a.rollCms=!0)),a.pet&&(i.pets?a.pet.getPet=!0:a.pet.getPet=!1),i.runCompletion&&r(Object(s.completion)(a)),r(o(t,a))}))}))}function r(t,e){return Math.random()*(t-e)+e}function o(t,e){var a=[],s="f"===t,n=[];s&&(t=1e6);var i=0;e.items.forEach((function(t){i+=t.rate,n.push(0)})),e.pet&&e.pet.getPet&&n.push(0);for(var o=0;o<t&&(l(o),"zulrah"===e.name&&l(o),e.rollCms&&c(o,e.cms),h(o),!s||n.some((function(t){return t<=0})));o++);return a;function c(t,e){var s=Math.random(),n=0;if(e.forEach((function(t){n+=t.rate})),console.log(s,n),s<n)for(var i=r(n,0),o=0,c=0;c<e.length;c++)if((o+=e[c].rate)>=i){a.push({kc:t+1,name:e[c].name});break}}function l(t){if(100*Math.random()<e.chance)for(var s=r(i,0),o=0,c=0;c<e.items.length;c++)if((o+=e.items[c].rate)>=s){a.push({kc:t+1,name:e.items[c].name}),n[c]+=1;break}}function h(t){var s;e.pet&&((s=e.pet.rate,Math.floor(Math.random()*s)+1)===e.pet.rate&&("cox"===e.name?a.length&&a[a.length-1].kc===t+1&&!["Twisted ancestral colour kit","Metamorphic dust"].includes(a[a.length-1].name)&&(a.push({kc:t+1,name:e.pet.name}),e.pet.getPet&&(n[n.length-1]+=1)):(a.push({kc:t+1,name:e.pet.name}),e.pet.getPet&&(n[n.length-1]+=1))))}}}},[[49,14,15]]]);
//# sourceMappingURL=main.8eab24cb.chunk.js.map